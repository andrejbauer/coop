(** A counter *)
operation tick : unit -> int

let ticker =
  cohandler int with
  | tick () @ w -> (w, w+1)
  end
;;
let job (_ : unit) =
  let a = tick () in
  let _ = tick () in
  let b = tick () in
  a + b

let demo =
  use ticker @ 0 in
    let r1 = job () in
    let r2 = job () in
    (r1, r2)
  finally
    val v @ _ -> v
  end
