(* Catch a signal arising from the body of the using block. *)

signal moo of unit ;;

using
  (cohandler () with end)
in
  moo ()
finally
| val _ @ _ -> 1
| moo () @ _ -> 2
end ;;

(* Catch a signal arising in a co-operation. *)

operation op : unit -> unit
signal sgl of unit

let demo =
  using
    (cohandler () with
     | op () @ () -> sgl ()
     end)
  in
    op ()
  finally
  | val _ @ _ -> 1
  | sgl () @ _ -> 2
  end

